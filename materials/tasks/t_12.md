# 課題：ネットワーク分析
　  この実習は、道路データを用いたネットワーク分析として最短経路検索とネットの分割を行うものです。
　GISでは、道路などのラインデータ等を用いて任意の地点間の経路等を求める場合等にネットワーク分析が用いられます。詳しくは、[地理情報科学教育用スライド（GIScスライド）]のネットワーク分析の教材を参照してください。

　手順とGISオープン教材の[ネットワーク分析]の教材を参考に、完成例のような地図が作成できれば、完了となります。実習で利用するデータの一部は、[既存データの地図データと属性データ]の教材を参考にダウンロードしてください。GIS初学者は、本教材を進める前に[GISの基本概念]の教材を確認しておいてください。

### 実習用データ
　実習をはじめる前に、以下のデータをダウンロードしてください。なお、すべてのデータをJGD2000の平面直角座標系第Ⅲ系で統一する。国土数値情報のデータはダウンロード後に「JGD2000の平面直角座標系」へ座標変換する。国土数値情報データの読み込み時に空間参照設定のウィンドウが表示されたら、JGD2000を選択（今回の場合）した後に、変換を行う。

* 「国土交通省国土政策局「[国土数値情報]（奈良県　道路、学校データ）」

* 「国土交通省国土政策局「[国土数値情報]（島根県　行政区域、道路、消防署、医療施設データ）」
　※道路データは、旧 統一フォーマット形式GML(JPGIS2.1)からダウンロードする。

  >ダウンロード手法は、[既存データの地図データと属性データ]の教材を参考とする。座標系の変換手法は[空間データ]の教材を参考とする。

  **Menu**
  --------

  * [課題1 最短経路検索](#最短経路検索)
  * [課題2 グラフの分割](#グラフの分割)

-----------------

## 課題1
### 最短経路検索
　最短経路検索は、任意の地点間の最短経路を取得する際に用いられる手法です。QGISで簡単にできる最短経路検索を以下の手順と[ネットワーク分析]を参考に行い地図を作成後、以下の課題に回答してください。

- 平城中学校と月ヶ瀬中学校の最短経路（標高などのコストを含まない）を求め、最短距離を回答してください。

### 完成例
![kadai](pic/12-1.png)

### 手順
1. 奈良県の道路と学校のデータを国土数値情報から、ダウンロードしQGISで読み込む。

2. レイヤウィンドウのポイントデータの上で右クリックし、プロパティからラベルを表示する。

3. 上段ウィンドウのアイコンのないグレーの個所で右クリックし、最短経路にチェックをいれ、道路グラフプラグインを起動する。※表示されない場合は、プラグインの管理とインストールでチェックが有効になっているか確認する。

4. ベクタ＞道路グラフをクリックし、使用するラインレイヤを設定し、「OK」をクリックする。

5. レイヤウィンドウで道路を選択した状態で、分析したい開始点と終了点の右横アイコンをクリックし、地図上でそれぞれの地点（ポイント付近）をクリックする。その後、計算をクリックすると長さと時間が算出される。

6. 最短経路ウィンドウから距離を確認する。

7. `エクスポート＞新しい一時レイヤ`を選択しレイヤを作成した後、地図をレイアウトする。

[△メニューへもどる]

## 課題2
### グラフの分割
　ネットの分割は、任意の地点から一定の距離ごとにネットワークを分割する手法です。例えば、避難所から道路に沿って、500ｍごとの範囲を求め付近にある消防署や病院の配置を評価したい場合等に用いられます。以下では、島根県の消防署と道路データを用いて、ネットを分割する手法について解説しています。ソフトウェアはQGISとGRASS GISを用いています。以下の手順と[ネットワーク分析]の教材を参考に、消防署から道路に沿って一定の距離を示す地図を作成してください。

### 完成例

![準備中](pic/12-2.png)

### 手順  

1. 島根県の行政区域、道路、消防署のデータをQGISで読み込む。

2. QGISのプラグインから、GRASS GISのマップセットを作成する。

3. マップセットからベクトルデータを読み込む。

4. グラフを作成する。

5. ネットの分割をする。

6. QGISでレイヤを表示し、レイアウトを整え地図を作成する。

[△メニューへもどる]

#### 完成例で使用したデータ
本ページで使用しているデータの出典については、該当する教材よりご確認ください。
[利用規約]:../../../policy.md
[その他のライセンスについて]:../../license.md
[よくある質問とエラー]:../../questions/questions.md

[GISの基本概念]:../../00/00.md
[QGISビギナーズマニュアル]:../../QGIS/QGIS.md
[GRASSビギナーズマニュアル]:../../GRASS/GRASS.md
[リモートセンシングとその解析]:../../06/06.md
[既存データの地図データと属性データ]:../../07/07.md
[空間データ]:../../08/08.md
[空間データベース]:../../09/09.md
[空間データの統合・修正]:../../10/10.md
[基本的な空間解析]:../../11/11.md
[ネットワーク分析]:../../12/12.md
[領域分析]:../../13/13.md
[点データの分析]:../../14/14.md
[ラスタデータの分析]:../../15/15.md
[傾向面分析]:../../16/16.md
[空間的自己相関]:../../17/17.md
[空間補間]:../../18/18.md
[空間相関分析]:../../19/19.md
[空間分析におけるスケール]:../../20/20.md
[視覚的伝達]:../../21/21.md
[参加型GISと社会貢献]:../../26/26.md

[地理院地図]:https://maps.gsi.go.jp
[e-Stat]:https://www.e-stat.go.jp/
[国土数値情報]:http://nlftp.mlit.go.jp/ksj/
[基盤地図情報]:http://www.gsi.go.jp/kiban/
[地理院タイル]:http://maps.gsi.go.jp/development/ichiran.html

[課題ページ_QGISビギナーズマニュアル]:../../tasks/t_qgis_entry.md
[課題ページ_GRASSビギナーズマニュアル]:../../tasks/t_grass_entry.md
[課題ページ_リモートセンシングとその解析]:../../tasks/t_06.md
[課題ページ_既存データの地図データと属性データ]:../../tasks/t_07.md
[課題ページ_空間データ]:../../tasks/t_08.md
[課題ページ_空間データベース]:../../tasks/t_09.md
[課題ページ_空間データの統合・修正]:../../tasks/t_10.md
[課題ページ_基本的な空間解析]:../../tasks/t_11.md
[課題ページ_ネットワーク分析]:../../tasks/t_12.md
[課題ページ_基本的な空間解析]:../../tasks/t_13.md
[課題ページ_点データの分析]:../../tasks/t_14.md
[課題ページ_ラスタデータの分析]:../../tasks/t_15.md
[課題ページ_空間補間]:../../tasks/t_18.md
[課題ページ_視覚的伝達]:../../tasks/t_21.md
[課題ページ_参加型GISと社会貢献]:../../tasks/t_26.md
